## 基本設計書 (Basic Design Document)

### 1. はじめに (Introduction)

#### 1.1. 目的 (Purpose)
本ドキュメントは、英語学習Webアプリケーション「EnglishLearningApp」の基本設計を定義することを目的とします。これにより、システム全体の概要、主要機能、システム構成、および非機能要件を明確にし、開発チーム内での共通認識を形成します。

#### 1.2. 対象読者 (Target Audience)
*   プロジェクトマネージャー
*   開発者（バックエンド、フロントエンド）
*   テスター

#### 1.3. ドキュメント構成 (Document Structure)
本ドキュメントは以下の章で構成されます。
*   はじめに
*   システム概要
*   機能要件
*   非機能要件
*   データモデル概要
*   画面遷移概要
*   今後の課題・検討事項

### 2. システム概要 (System Overview)

#### 2.1. システム名称 (System Name)
EnglishLearningApp

#### 2.2. システム目的 (System Purpose)
ユーザーが効率的に英語学習を進められるよう、単語やフレーズの管理、学習コンテンツの提供、学習履歴の可視化をサポートするWebアプリケーションを提供します。

#### 2.3. 主要機能 (Main Functions)
*   **カテゴリー管理機能**: 学習内容をカテゴリー別に整理・管理します。
*   **単語管理機能**: カテゴリーに紐づけて英語の単語やフレーズを登録・管理します。画像や音声データも登録可能です。
*   **学習コンテンツ表示機能**: 登録された英語の単語、画像、音声データ、意味をカテゴリーごとに表示し、学習をサポートします。
*   **ログイン履歴表示機能**: ユーザーのログイン履歴を可視化し、学習意欲の向上を促します。
*   **認証・認可機能**: ユーザーのログイン、登録、およびアクセス制御を行います。
*   **ファイルアップロード機能**: 単語登録時に画像ファイルや音声ファイルをアップロードし、管理します。

#### 2.4. システム構成 (System Architecture)

##### 2.4.1. 論理構成 (Logical Architecture)
本システムは、以下の3層アーキテクチャを採用します。
*   **プレゼンテーション層 (Frontend)**: ユーザーインターフェースを提供し、ユーザーからの操作を受け付け、バックエンドAPIと連携します。
*   **アプリケーション層 (Backend)**: ビジネスロジックを処理し、データベースとの連携、ファイル管理、認証・認可を行います。
*   **データ層 (Database)**: アプリケーションのデータを永続的に保存します。

##### 2.4.2. 物理構成 (Physical Architecture)
本システムはDockerコンテナとしてデプロイされ、以下の主要なコンポーネントで構成されます。
*   **Frontend Container**: Reactアプリケーションを実行します。
*   **Backend Container**: Spring Bootアプリケーションを実行し、RESTful APIを提供します。
*   **Database Container**: MySQLデータベースを実行します。
*   **Nginx (Frontend)**: フロントエンドの静的ファイル配信およびバックエンドAPIへのリバースプロキシとして機能します。

```
+-------------------+       +-------------------+       +-------------------+
|   User Browser    | <---> |   Nginx (Frontend)| <---> | Frontend Container|
|                   |       |                   |       | (React/Vite)      |
+-------------------+       +-------------------+       +-------------------+
                                      |
                                      | API Calls
                                      V
+-------------------+       +-------------------+
| Database Container| <---> | Backend Container  |
| (MYSQL)|          |       | (Spring Boot/Java) |
+-------------------+       +-------------------+
```

#### 2.5. 利用技術スタック (Technology Stack Used)
| 項目 | 技術 | バージョン |
| :--- | :--- | :--- |
| **フロントエンド** | Node.js | 22.17.0 |
| | React | 19.1.0 |
| | TypeScript | 5.8.3 |
| | Vite | 7.0.0 |
| **バックエンド** | Java | 17 |
| | Spring Boot | 3.4.7 |
| **データベース** | MySQL | 8.0 |
| **コンテナ化** | Docker | - |
| | Docker Compose | - |

### 3. 機能要件 (Functional Requirements)

#### 3.1. 機能一覧 (List of Functions)
*   **ユーザー管理**
    *   ユーザー登録
    *   ユーザーログイン
    *   ユーザー情報更新
*   **カテゴリー管理**
    *   カテゴリー登録
    *   カテゴリー一覧表示
    *   カテゴリー編集
    *   カテゴリー削除
*   **単語管理**
    *   単語登録（カテゴリー紐付け、画像・音声ファイルアップロード含む）
    *   単語一覧表示（カテゴリー別フィルタリング）
    *   単語詳細表示
    *   単語編集
    *   単語削除
*   **学習機能**
    *   カテゴリー別単語表示（画像、音声、意味）
    *   クイズ機能（未実装だが将来的な拡張として考慮）
*   **履歴表示**
    *   ログイン履歴表示

#### 3.2. 各機能の詳細 (Details of Each Function)

##### 3.2.1. ユーザー登録
*   **概要**: 新規ユーザーがシステムにアカウントを登録する。
*   **入力**: ユーザー名、パスワード、メールアドレス
*   **出力**: 登録成功メッセージ、またはエラーメッセージ

##### 3.2.2. ユーザーログイン
*   **概要**: 登録済みユーザーがシステムにログインする。
*   **入力**: ユーザー名、パスワード
*   **出力**: 認証トークン、またはエラーメッセージ。ログイン履歴が記録される。

##### 3.2.3. カテゴリー登録
*   **概要**: 新しい学習カテゴリーを登録する。
*   **入力**: カテゴリー名
*   **出力**: 登録されたカテゴリー情報、またはエラーメッセージ

##### 3.2.4. 単語登録
*   **概要**: 新しい英語の単語を登録し、既存のカテゴリーに紐づける。画像ファイルと音声ファイルを任意でアップロードできる。
*   **入力**: 単語、意味、カテゴリーID、画像ファイル（任意）、音声ファイル（任意）
*   **出力**: 登録された単語情報、またはエラーメッセージ

##### 3.2.5. 学習コンテンツ表示
*   **概要**: 選択されたカテゴリーに属する単語の一覧を表示する。各単語について、単語、意味、関連する画像、音声再生機能を提供する。
*   **入力**: カテゴリーID
*   **出力**: 単語リスト（単語、意味、画像URL、音声URL）

##### 3.2.6. ログイン履歴表示
*   **概要**: ログインしたユーザーのログイン日時とIPアドレスの一覧を表示する。
*   **入力**: なし（ログイン済みユーザーの履歴）
*   **出力**: ログイン履歴リスト（ログイン日時、IPアドレス）

### 4. 非機能要件 (Non-Functional Requirements)

#### 4.1. 性能要件 (Performance Requirements)
*   API応答時間: ほとんどのAPIは2秒以内に応答すること。
*   同時接続数: 100ユーザーの同時接続に耐えうること。

#### 4.2. 可用性要件 (Availability Requirements)
*   稼働時間: 24時間365日稼働を目標とする。
*   目標復旧時間 (RTO): 4時間以内。
*   目標復旧時点 (RPO): 1時間以内。

#### 4.3. 保守性要件 (Maintainability Requirements)
*   コードの可読性: 適切なコメント、命名規則、コーディング規約を遵守する。
*   テスト容易性: 各コンポーネントが単体テスト可能であること。
*   ログ出力: 適切なレベルでログが出力され、問題発生時の原因特定が容易であること。

#### 4.4. セキュリティ要件 (Security Requirements)
*   認証: JWT (JSON Web Token) を用いたトークンベース認証を実装する。
*   認可: ユーザーロールに基づいたアクセス制御を行う。
*   パスワード管理: パスワードはハッシュ化して保存する。
*   入力値検証: 全てのユーザー入力に対して適切なバリデーションを行う。
*   ファイルアップロード: アップロードされるファイルのタイプ、サイズを制限し、悪意のあるファイルの実行を防ぐ。

#### 4.5. 運用要件 (Operational Requirements)
*   デプロイ: Docker Composeを用いた容易なデプロイが可能であること。
*   監視: コンテナの稼働状況、リソース使用状況を監視できること。
*   バックアップ: データベースの定期的なバックアップが可能であること。

#### 4.6. 拡張性要件 (Scalability Requirements)
*   将来的なユーザー増加に対応できるよう、コンテナのスケーリングが容易な設計とする。
*   機能追加が容易なモジュール化された設計とする。

### 5. データモデル概要 (Data Model Overview)

主要なエンティティは以下の通りです。

*   **User**: ユーザー情報（ID, ユーザー名, パスワードハッシュ, メールアドレスなど）
*   **Category**: 学習カテゴリー情報（ID, カテゴリー名など）
*   **Word**: 単語情報（ID, 単語, 意味, カテゴリーID, 画像パス, 音声パスなど）
*   **LoginHistory**: ログイン履歴情報（ID, ユーザーID, ログイン日時, IPアドレスなど）

これらのエンティティは、リレーショナルデータベース（MySQL）で管理されます。

### 6. 画面遷移概要 (Screen Transition Overview)

主要な画面と遷移は以下の通りです。

*   **ログイン画面**: ユーザー名とパスワードを入力してログイン。
    *   → ホーム画面
    *   → ユーザー登録画面
*   **ユーザー登録画面**: 新規ユーザー情報を入力して登録。
    *   → ログイン画面
*   **ホーム画面**: カテゴリー一覧が表示され、各カテゴリーを選択して単語一覧へ遷移。
    *   → カテゴリー管理画面
    *   → 単語管理画面
    *   → ログイン履歴画面
    *   → アカウント設定画面
*   **カテゴリー管理画面**: カテゴリーの登録、編集、削除。
    *   → ホーム画面
*   **単語管理画面**: 単語の登録、編集、削除。カテゴリー選択によりフィルタリング可能。
    *   → 単語詳細画面
    *   → ホーム画面
*   **単語詳細画面**: 単語の詳細情報（画像、音声含む）を表示。
    *   → 単語管理画面
*   **ログイン履歴画面**: ログイン履歴の一覧を表示。
    *   → ホーム画面
*   **アカウント設定画面**: ユーザー情報の更新。
    *   → ホーム画面

### 7. 今後の課題・検討事項 (Future Issues/Considerations)

*   クイズ機能の実装
*   単語の学習進捗管理機能
*   多言語対応
*   通知機能